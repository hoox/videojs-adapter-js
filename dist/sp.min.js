/**
 * @license MIT
 * youbora-adapter-videojs5 6.0.0-rc
 * Packed with youboralib 6.0.0-rc
 * Copyright NicePopleAtWork <http://nicepeopleatwork.com/>
 * @author Jordi Aguilar
 */
(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.youbora=e()}})(function(){var e,t,i;return function e(t,i,r){function s(a,o){if(!i[a]){if(!t[a]){var d=typeof require=="function"&&require;if(!o&&d)return d(a,!0);if(n)return n(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var h=i[a]={exports:{}};t[a][0].call(h.exports,function(e){var i=t[a][1][e];return s(i?i:e)},h,h.exports,e,t,i,r)}return i[a].exports}var n=typeof require=="function"&&require;for(var a=0;a<r.length;a++)s(r[a]);return s}({1:[function(e,t,i){t.exports={name:"videojs5",type:"adapter",tech:"js",author:"Jordi Aguilar",version:"6.0.0-rc",repo:"git+https://bitbucket.org/npaw/videojs5-adapter-js.git",built:"Wed Jan 25 2017",features:{buffer:"monitor",seek:"native",getters:["getPlayhead","getDuration","getBitrate","getThroughput","getRendition","getTitle","getResource"]},libVersion:"6.0.0-rc",ads:[{buffer:"monitor",seek:"monitor",getters:["getPlayhead"],filename:"brightcove.js"},{buffer:"monitor",seek:"monitor",getters:[],filename:"generic.js"},{buffer:"monitor",seek:"monitor",getters:["getPlayhead","getDuration","getTitle"],filename:"ima.js"},{buffer:"monitor",seek:"monitor",getters:["getPlayhead","getDuration","getResource"],filename:"onceux.js"}]}},{}],2:[function(e,t,i){t.exports={type:"core",tech:"js",author:"Jordi Aguilar",version:"6.0.0-rc",repo:"git+https://bitbucket.org/npaw/plugin-lib-js.git",built:"Wed Jan 25 2017"}},{}],3:[function(e,t,i){var r=e("../emitter");var s=e("../log");var n=e("../version");var a=e("./playbackchronos");var o=e("./playbackflags");var d=e("./playheadmonitor");var u=r.extend({constructor:function(e){this.flags=new o;this.chronos=new a;this.monitor=null;this.plugin=null;this.player=null;if(typeof e==="string"){this.player=document.getElementById(e)}else{this.player=e}this.tag=this.player;this.registerListeners();s.notice("Adapter "+this.getVersion()+" with Lib "+n+" is ready.");this.emit(u.Event.READY)},registerListeners:function(){},unregisterListeners:function(){},dispose:function(){if(this.monitor)this.monitor.stop();this.fireStop();this.unregisterListeners();this.player=null;this.tag=null},monitorPlayhead:function(e,t,i){var r=0;if(e)r|=d.Type.BUFFER;if(t)r|=d.Type.SEEK;this.monitor=new d(this,r,i)},getPlayhead:function(){return null},getPlayrate:function(){return!this.flags.isPaused?1:0},getFramesPerSecond:function(){return null},getDroppedFrames:function(){return null},getDuration:function(){return null},getBitrate:function(){return null},getThroughput:function(){return null},getRendition:function(){return null},getTitle:function(){return null},getTitle2:function(){return null},getIsLive:function(){return null},getResource:function(){return null},getPlayerVersion:function(){return null},getPlayerName:function(){return null},getVersion:function(){return n+"-generic-js"},getPosition:function(){return null},fireStart:function(e){if(!this.flags.isStarted){this.flags.isStarted=true;this.chronos.total.start();this.chronos.join.start();this.emit(u.Event.START,{params:e})}},fireJoin:function(e){if(this.flags.isStarted&&!this.flags.isJoined){if(this.monitor)this.monitor.start();this.flags.isJoined=true;this.chronos.join.stop();this.emit(u.Event.JOIN,{params:e})}},firePause:function(e){if(this.flags.isJoined&&!this.flags.isPaused){this.flags.isPaused=true;this.chronos.pause.start();this.emit(u.Event.PAUSE,{params:e})}},fireResume:function(e){if(this.flags.isJoined&&this.flags.isPaused){this.flags.isPaused=false;this.chronos.pause.stop();if(this.monitor)this.monitor.skipNextTick();this.emit(u.Event.RESUME,{params:e})}},fireBufferBegin:function(e,t){if(this.flags.isJoined&&!this.flags.isBuffering){if(t&&this.flags.isSeeking){s.notice("Converting current buffer to seek");this.chronos.buffer=this.chronos.seek.clone();this.chronos.seek.reset();this.flags.isSeeking=false}else{this.chronos.buffer.start()}this.flags.isBuffering=true;this.emit(u.Event.BUFFER_BEGIN,{params:e})}},fireBufferEnd:function(e){if(this.flags.isJoined&&this.flags.isBuffering){this.flags.isBuffering=false;this.chronos.buffer.stop();if(this.monitor)this.monitor.skipNextTick();this.emit(u.Event.BUFFER_END,{params:e})}},fireSeekBegin:function(e,t){if(this.flags.isJoined&&!this.flags.isSeeking){if(t!==false&&this.flags.isBuffering){s.notice("Converting current buffer to seek");this.chronos.seek=this.chronos.buffer.clone();this.chronos.buffer.reset();this.flags.isBuffering=false}else{this.chronos.seek.start()}this.flags.isSeeking=true;this.emit(u.Event.SEEK_BEGIN,{params:e})}},fireSeekEnd:function(e){if(this.flags.isJoined&&this.flags.isSeeking){this.flags.isSeeking=false;this.chronos.seek.stop();if(this.monitor)this.monitor.skipNextTick();this.emit(u.Event.SEEK_END,{params:e})}},fireStop:function(e){if(this.flags.isStarted){if(this.monitor)this.monitor.stop();this.flags.reset();this.chronos.total.stop();this.chronos.join.reset();this.chronos.pause.reset();this.chronos.buffer.reset();this.chronos.seek.reset();this.emit(u.Event.STOP,{params:e})}},fireError:function(e,t,i,r){var s={};if(typeof e==="object"){s=e}else{s.errorCode=e||"PLAY_FAILURE";s.errorMsg=t||s.errorCode;s.errorMetadata=i;s.errorLevel=r||"error"}this.emit(u.Event.ERROR,{params:s})},fireFatalError:function(e,t,i){if(this.monitor)this.monitor.stop();this.fireError(e,t,i,"fatal");this.fireStop()}},{Event:{READY:"ready",START:"start",JOIN:"join",PAUSE:"pause",RESUME:"resume",SEEK_BEGIN:"seek-begin",SEEK_END:"seek-end",BUFFER_BEGIN:"buffer-begin",BUFFER_END:"buffer-end",ERROR:"error",FATAL_ERROR:"fatal-error",STOP:"stop"}});t.exports=u},{"../emitter":18,"../log":19,"../version":27,"./playbackchronos":4,"./playbackflags":5,"./playheadmonitor":6}],4:[function(e,t,i){var r=e("../object");var s=e("../chrono");var n=r.extend({constructor:function(){this.reset()},reset:function(){this.join=new s;this.seek=new s;this.pause=new s;this.buffer=new s;this.total=new s}});t.exports=n},{"../chrono":7,"../object":20}],5:[function(e,t,i){var r=e("../object");var s=r.extend({constructor:function(){this.reset()},reset:function(){this.isStarted=false;this.isJoined=false;this.isPaused=false;this.isSeeking=false;this.isBuffering=false}});t.exports=s},{"../object":20}],6:[function(e,t,i){var r=e("../object");var s=e("../timer");var n=e("../chrono");var a=r.extend({constructor:function(e,t,i){this._adapter=e;this._seekEnabled=t&a.Type.SEEK;this._bufferEnabled=t&a.Type.BUFFER;i=i||800;this._chrono=new n;this._lastPlayhead=0;if(i>0){this._timer=new s(this.progress.bind(this),i)}},start:function(){this._timer.start()},stop:function(){if(this._timer)this._timer.stop()},skipNextTick:function(){this._lastPlayhead=0},progress:function(){var e=this._chrono.stop();this._chrono.start();var t=e*a.kBUFFER_THRESHOLD_RATIO;var i=e*a.kSEEK_THRESHOLD_RATIO;var r=this._getPlayhead();var s=Math.abs(this._lastPlayhead-r)*1e3;if(s<t){if(this._bufferEnabled&&this._lastPlayhead>0&&!this._adapter.flags.isPaused&&!this._adapter.flags.isSeeking){this._adapter.fireBufferBegin(null,false)}}else if(s>i){if(this._seekEnabled&&this._lastPlayhead>0){this._adapter.fireSeekBegin(null,false)}}else{if(this._seekEnabled){this._adapter.fireSeekEnd()}else if(this._bufferEnabled){this._adapter.fireBufferEnd()}}this._lastPlayhead=r},_getPlayhead:function(){return this._adapter.getPlayhead()}},{Type:{NONE:0,BUFFER:1,SEEK:2},kBUFFER_THRESHOLD_RATIO:.5,kSEEK_THRESHOLD_RATIO:2});t.exports=a},{"../chrono":7,"../object":20,"../timer":25}],7:[function(e,t,i){var r=e("./object");var s=r.extend({constructor:function(){this.reset()},reset:function(){this.startTime=0;this.stopTime=0;this.offset=0},getDeltaTime:function(e){var t=(new Date).getTime();if(this.startTime){if(e&&!this.stopTime){this.stopTime=t}return this.offset+(t-this.startTime)}else{return-1}},start:function(){this.startTime=(new Date).getTime();this.stopTime=0},stop:function(){this.stopTime=(new Date).getTime();return this.startTime?this.offset+(this.stopTime-this.startTime):-1},clone:function(){var e=new s;e.startTime=this.startTime;e.stopTime=this.stopTime;e.offset=this.offset;return e}});t.exports=s},{"./object":20}],8:[function(e,t,i){var r=e("../object");var s=e("../log");var n=e("./request");var a=e("./transform/transform");var o=r.extend({constructor:function(){this.transforms=[];this._requests=[]},sendRequest:function(e,t){if(e){if(typeof t==="function")e.on(n.Event.SUCCESS,t);this._registerRequest(e)}},buildRequest:function(e,t,i,r){i=i||{};var s=new n(e,t,i);if(typeof r==="function")s.on(n.Event.SUCCESS,r);this._registerRequest(s)},addTransform:function(e){if(e.parse&&e.isBlocking){this.transforms.push(e);e.on(a.Event.DONE,this._processRequests.bind(this))}else{s.warn(e+" is not a valid RequestTransform.")}},removeTransform:function(e){var t=this.transforms.indexOf(e);if(t!==-1){this.transforms.splice(t,1)}else{s.warn("Trying to remove unexisting Transform '"+e+"'.")}},_registerRequest:function(e){this._requests.push(e);this._processRequests()},_processRequests:function(){var e=this._requests;this._requests=[];var t=[];while(e.length){var i=e.shift();if(this._transform(i)){i.send()}else{t.push(i)}}while(t.length){this._requests.push(t.shift())}},_transform:function(e){var t=true;this.transforms.forEach(function(i){if(i.isBlocking(e)){t=false;return}else{i.parse(e)}});return t}});t.exports=o},{"../log":19,"../object":20,"./request":9,"./transform/transform":15}],9:[function(e,t,i){var r=e("../object");var s=e("../log");var n=r.extend({constructor:function(e,t,i,r){this.xhr=this.createXHR();this.host=e||"";this.service=t||"";this.params=i||{};this.options=Object.assign({method:"GET",requestHeaders:{},maxRetries:3,retryAfter:5e3,cache:false},r);this.retries=0;if(!this.options.cache){this.setParam("timemark",(new Date).getTime())}},createXHR:function(){try{if(XMLHttpRequest){return new XMLHttpRequest}else{return new ActiveXObject("Microsoft.XMLHTTP")}}catch(e){s.error(e);return{}}},getXHR:function(){return this.xhr},getUrl:function(){return this.host+this.service+this.getParamString()},on:function(e,t){this.xhr.addEventListener(e,t.bind(this,this));return this},off:function(e,t){this.xhr.removeEventListener(e,t);return this},getParamString:function(){try{var e="?";for(var t in this.params){var i=this.params[t];if(i!==null&&typeof i==="object"){var r=encodeURIComponent(JSON.stringify(i));if(r.length>2){e+=encodeURIComponent(t)+"="+r+"&"}}else if(i!==null&&typeof i!=="undefined"&&i!==""){e+=encodeURIComponent(t)+"="+encodeURIComponent(i)+"&"}}return e.slice(0,-1)}catch(e){s.error(e);return""}},getParam:function(e){return this.params[e]},setParam:function(e,t){this.params[e]=t;return this},send:function(){try{this.xhr.open(this.options.method,this.getUrl(),true);if(this.options.requestHeaders){for(var e in this.options.requestHeaders){if(this.options.requestHeaders.hasOwnProperty(e)){this.xhr.setRequestHeader(e,this.options.requestHeaders[e])}}}if(this.options.retryAfter>0&&this.options.maxRetries>0){var t=function(){if(this.retries>=this.options.maxRetries){s.error('Aborting failed request "'+this.service+'". Max retries reached.')}else{s.warn('YBRequest "'+this.service+'" failed. Retry '+(this.retries+1)+" of "+this.options.maxRetries+" in "+this.options.retryAfter+"ms.");setTimeout(function(){this.retries+=1;this.send()}.bind(this),this.options.retryAfter)}};if(this.retries===0){this.on(n.Event.ERROR,t.bind(this))}}if(s.logLevel<=s.Level.VERBOSE){s.verbose("XHR Req: "+this.getUrl())}for(var i in n._globalListeners){n._globalListeners[i].forEach(function(e){this.on(i,e)}.bind(this))}return this.xhr.send()}catch(e){s.error(e)}}},{Event:{SUCCESS:"load",LOAD:"load",ERROR:"error",ABORT:"abort"},_globalListeners:{},onEvery:function(e,t){n._globalListeners[e]=n._globalListeners[e]||[];n._globalListeners[e].push(t)},offEvery:function(e,t){if(n._globalListeners[e]){var i=n._globalListeners[e].indexOf(t);if(i!==-1){n._globalListeners[e].splice(i,1)}}}});t.exports=n},{"../log":19,"../object":20}],10:[function(e,t,i){var r=e("./transform");var s=e("../../constants");var n=r.extend({_services:[s.Service.INIT,s.Service.START],isBlocking:function(e){if(this._isBusy&&e!=null&&this._services.indexOf(e.service)!==-1){this.done()}return r.prototype.isBlocking.apply(this,arguments)}});t.exports=n},{"../../constants":17,"./transform":15}],11:[function(e,t,i){var r=e("./transform");var s=e("../../constants");var n=r.extend({constructor:function(){this.done()},parse:function(e){this._cloneParam(e,"accountCode","system");this._cloneParam(e,"transactionCode","transcode");this._cloneParam(e,"username","user");this._cloneParam(e,"mediaResource","resource");this._cloneParam(e,"errorMsg","msg");if(e.service!==s.Service.JOIN){this._cloneParam(e,"playhead","time")}switch(e.service){case s.Service.START:this._cloneParam(e,"mediaDuration","duration");break;case s.Service.JOIN:this._cloneParam(e,"joinDuration","time");this._cloneParam(e,"playhead","eventTime");break;case s.Service.SEEK:this._cloneParam(e,"seekDuration","duration");break;case s.Service.BUFFER:this._cloneParam(e,"bufferDuration","duration");break;case s.Service.PING:for(var t in e.params.entities){e.params.entityType=t;e.params.entityValue=e.params.entities[t];break}break}},_cloneParam:function(e,t,i){e.params[i]=e.params[t]}});t.exports=n},{"../../constants":17,"./transform":15}],12:[function(e,t,i){var r=e("./transform");var s=e("./resourceparsers/hlsparser");var n=e("./resourceparsers/cdnparser");var a=e("../../log");var o=e("../../constants");var d=r.extend({constructor:function(e){d.__super__.constructor.apply(this,arguments);this._plugin=e;this._realResource=null;this._initResource=null;this._cdnName=null;this._cdnNodeHost=null;this._cdnNodeTypeString=null;this._cdnNodeType=null;this._responses={};this._isBusy=false},getResource:function(){return this._realResource||this._initResource},getCdnName:function(){return this._cdnName},getNodeHost:function(){return this._cdnNodeHost},getNodeTypeString:function(){return this._cdnNodeTypeString},getNodeType:function(){return this._cdnNodeType},init:function(e){if(!this._isBusy){this._isBusy=true;this._initResource=e;n.setBalancerHeaderName(this._cdnNameHeader);this._hlsEnabled=this._plugin.isParseHls();this._cdnEnabled=this._plugin.isParseCdnNode();this._cdnList=this._plugin.getParseCdnNodeList().slice();this._cdnNameHeader=this._plugin.getParseCdnNodeNameHeader();this._setTimeout();if(this._hlsEnabled){this._parseHLS()}else if(this._cdnEnabled){this._parseCDN()}else{this.done()}}},_setTimeout:function(){this._parseTimeout=setTimeout(function(){if(this._isBusy){this.done();a.warn("ResourceTransform has exceded the maximum execution time (3s) and will be aborted.")}}.bind(this),3e3)},_parseHLS:function(){var e=new s;e.on(s.Event.DONE,function(){this._realResource=this._hlsTransform.getResource();if(this._cdnEnabled){this._parseCDN()}else{this.done()}}.bind(this));e.parse(this._initResource)},_parseCDN:function(){if(this._cdnList.length>0){var e=this._cdnList.pop();if(this.getNodeHost())this.done();var t=n.create(e);if(t){t.on(n.Event.DONE,function(){this._responses=t.getResponses();this._cdnName=t.getCdnName();this._cdnNodeHost=t.getNodeHost();this._cdnNodeTypeString=t.getNodeTypeString();this._cdnNodeType=t.getNodeType();if(this.getNodeHost())this.done()}.bind(this));t.parse(this.getResource(),this._responses)}else{this._parseCDN()}}},parse:function(e){if(e.service===o.Service.START){var t=this._plugin.requestBuilder.lastSent;t.mediaResource=e.params.mediaResource=this.getResource();if(this._cdnEnabled){t.cdn=e.params.cdn=e.params.cdn||this.getCdnName();t.nodeHost=e.params.nodeHost=this.getNodeHost();t.nodeType=e.params.nodeType=this.getNodeType();t.nodeTypeString=e.params.nodeTypeString=this.getNodeTypeString()}}}});t.exports=d},{"../../constants":17,"../../log":19,"./resourceparsers/cdnparser":13,"./resourceparsers/hlsparser":14,"./transform":15}],13:[function(e,t,i){var r=e("../../../emitter");var s=e("../../../log");var n=e("../../request");var a=r.extend({constructor:function(e){this._options=Object.assign({cdnName:null,parsers:[],requestHeaders:{},parseType:function(){return 0}},e);this._responses={}},done:function(){this.emit(a.Event.DONE)},addParser:function(e){this._options.parsers.push(e);return this},setCdnName:function(e){this._options.cdnName=e;return this},setRequestHeader:function(e,t){this._options.requestHeaders[e]=t;return this},setParseType:function(e){this._options.parseType=e;return this},getCdnName:function(){return this._cdnName},getNodeHost:function(){return this._cdnNodeHost},getNodeTypeString:function(){return this._cdnNodeTypeString},getNodeType:function(){return this._cdnNodeType},getResponses:function(){return this._responses},parse:function(e,t){this._responses=t||{};var i=JSON.stringify(this._options.requestHeaders);if(this._responses[i]){this._parseResponse(this._responses[i])}else{this._requestResponse(e)}},_requestResponse:function(e){var t=JSON.stringify(this._options.requestHeaders);var i=new n(e,null,null,{method:"HEAD",maxRetries:0,requestHeaders:this._options.requestHeaders});i.on(n.Event.SUCCESS,function(e){this._responses[t]=e.getXHR().getAllResponseHeaders();this._parseResponse(this._responses[t])}.bind(this));i.on(n.Event.ERROR,function(e){this.done()}.bind(this));i.send()},_parseResponse:function(e){this._options.parsers.forEach(function(t){e.split("\n").forEach(function(e){var i=e.indexOf(":");if(i!==-1){var r=e.slice(0,i);if(r===t.headerName){this._executeParser(t,e.slice(i+1))}}}.bind(this))}.bind(this));this.done()},_executeParser:function(e,t){try{var i=e.regex.exec(t.trim());if(i!==null){if(this._options.cdnName)this._cdnName=this._options.cdnName;switch(e.element){case"host":this._cdnNodeHost=i[1];break;case"type":this._cdnNodeTypeString=i[1];this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case"host+type":this._cdnNodeHost=i[1];this._cdnNodeTypeString=i[2];this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case"type+host":this._cdnNodeTypeString=i[1];this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);this._cdnNodeHost=i[2];break;case"name":this._cdnName=i[1].toUpperCase();break}}}catch(e){s.warn("CDN parsing for "+this._options.cdnName+" could not parse header value "+t)}}},{Event:{DONE:"done"},_cdns:{Level3:{cdnName:"LEVEL3",parsers:[{element:"host+type",headerName:"X-WR-DIAG",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"X-WR-DIAG":"host"},parseType:function(e){switch(e){case"TCP_HIT":case"TCP_MEM_HIT":case"TCP_IMS_HIT":return 1;case"TCP_MISS":return 2;default:return 0}}},Cloudfront:{cdnName:"CLOUDFRT",parsers:[{element:"host",headerName:"X-Amz-Cf-Id",regex:/(.+)/},{element:"type",headerName:"X-Cache",regex:/(\S+)\s.+/}],parseType:function(e){switch(e){case"Hit":return 1;case"Miss":return 2;default:return 0}}},Akamai:{cdnName:"AKAMAI",parsers:[{element:"type+host",headerName:"X-Cache",regex:/(.+)\sfrom\s.+\(.+\/(.+)\).*/}],parseType:function(e){switch(e){case"TCP_HIT":return 1;case"TCP_MISS":return 2;default:return 0}}},Highwinds:{cdnName:"HIGHNEGR",parsers:[{element:"host+type",headerName:"X-HW",regex:/.+,[0-9]+\.(.+)\.(.+)/}],parseType:function(e){switch(e){case"c":case"x":return 1;default:return 2}}},Fastly:{cdnName:"FASTLY",parsers:[{element:"host",headerName:"X-Served-By",regex:/([^,\s]+)$/},{element:"type",headerName:"X-Cache",regex:/([^,\s]+)$/}],parseType:function(e){switch(e){case"HIT":return 1;case"MISS":return 2;default:return 0}}},Balancer:{parsers:[{element:"name",headerName:null,regex:/(.+)/}]}},setBalancerHeaderName:function(e){a._cdns.Balancer.parsers[0].headerName=e},create:function(e){if(a._cdns[e]){return new a(a._cdns[e])}else{s.warn("Tried to create an unexisting CdnParser named "+e)}},add:function(e,t){a._cdns[e]=t}});t.exports=a},{"../../../emitter":18,"../../../log":19,"../../request":9}],14:[function(e,t,i){var r=e("../../request");var s=e("../../../emitter");var n=e("../../../log");var a=s.extend({constructor:function(){this._realResource=null},done:function(){this.emit(a.Event.DONE)},parse:function(e,t){t=t||"";try{var i=/((\S*?)(\.m3u8|\.m3u|\.ts|\.mp4)(\?\S*|\n|\r|$))/i.exec(e)}catch(e){n.warn("Parse HLS Regex failed",e);this.done()}if(i!==null){var s=i[1].trim();var a=t.lastIndexOf("/");if(s.indexOf("http")!==0&&a!==-1){s=t.slice(0,a)+"/"+s}if(i[3]===".m3u8"||i[3]===".m3u"){var o=new r(s,null,null,{cache:true});o.on(r.Event.SUCCESS,function(e){this.parse(e.getXHR().responseText,i[2])}.bind(this));o.on(r.Event.ERROR,function(e){this.done()}.bind(this));o.send()}else{this._realResource=s;this.done()}}else{this.done()}},getResource:function(){return this._realResource}},{Event:{DONE:"done"}});t.exports=a},{"../../../emitter":18,"../../../log":19,"../../request":9}],15:[function(e,t,i){var r=e("../../emitter");var s=r.extend({constructor:function(){this._isBusy=true},parse:function(e){},isBlocking:function(e){return this._isBusy},done:function(){this._isBusy=false;this.emit(s.Event.DONE)}},{Event:{DONE:"done"}});t.exports=s},{"../../emitter":18}],16:[function(e,t,i){var r=e("../request");var s=e("./transform");var n=e("../../log");var a=e("../../util");var o=e("../../constants");var d=s.extend({constructor:function(e){s.prototype.constructor.apply(this,arguments);this.response={};this._viewIndex=-1;var t=o.Service.DATA;var i={apiVersion:"v6,v7",outputformat:"jsonp"};i=e.requestBuilder.buildParams(i,t);if(i!==null){n.notice(t+" "+i.system);if(i.system==="nicetest"){n.error("No accountCode has been set. Please set your accountCode inside plugin's options.")}this._request=new r(e.getHost(),t,i)}},init:function(){this._request.on(r.Event.SUCCESS,this._receiveData.bind(this)).on(r.Event.ERROR,this._failedData.bind(this)).send()},_receiveData:function(e,t){try{var i=e.getXHR().response;var r=JSON.parse(i.slice(i.indexOf("(")+1,i.lastIndexOf(")")));this.response.host=a.addProtocol(r.q.h);this.response.code=r.q.c;this.response.pingTime=r.q.pt;this.done()}catch(e){n.error("Fastdata response is invalid.")}},_failedData:function(e,t){n.error("Fastdata request failed.")},nextView:function(){this._viewIndex+=1;return this.getViewCode()},getViewCode:function(){return this.response.code+"_"+this._viewIndex},parse:function(e){e.host=e.host||this.response.host;e.params.code=e.params.code||this.getViewCode();if(e.service===o.Service.PING||e.service===o.Service.START){e.params.pingTime=e.params.pingTime||this.response.pingTime}}});t.exports=d},{"../../constants":17,"../../log":19,"../../util":26,"../request":9,"./transform":15}],17:[function(e,t,i){var r={Service:{DATA:"/data",INIT:"/init",START:"/start",JOIN:"/joinTime",PAUSE:"/pause",RESUME:"/resume",SEEK:"/seek",BUFFER:"/bufferUnderrun",ERROR:"/error",STOP:"/stop",PING:"/ping",AD_START:"/adStart",AD_JOIN:"/adJoin",AD_PAUSE:"/adPause",AD_RESUME:"/adResume",AD_BUFFER:"/adBufferUnerrun",AD_STOP:"/adStop"}};t.exports=r},{}],18:[function(e,t,i){var r=e("./object");var s=r.extend({on:function(e,t){this._listeners=this._listeners||{};if(typeof t==="function"){this._listeners[e]=this._listeners[e]||[];this._listeners[e].push(t);return this}},off:function(e,t){this._listeners=this._listeners||{};if(this._listeners[e]){var i=this._listeners[e].indexOf(t);if(i!==-1){this._listeners[e].splice(i,1)}}return this},emit:function(e,t){this._listeners=this._listeners||{};t=t||{};if(Array.isArray(this._listeners[e])){this._listeners[e].forEach(this._eachCallback.bind(this,e,t))}if(Array.isArray(this._listeners["*"])){this._listeners["*"].forEach(this._eachCallback.bind(this,e,t))}return this},_eachCallback:function(e,t,i){if(typeof i==="function"){i({type:e,data:t,target:this})}}});t.exports=s},{"./object":20}],19:[function(e,t,i){var r=e("./emitter");var s={_emitter:new r,on:function(){s._emitter.on.apply(s._emitter,arguments)},off:function(){s._emitter.off.apply(s._emitter,arguments)},emit:function(){s._emitter.emit.apply(s._emitter,arguments)},Level:{SILENT:6,ERROR:5,WARNING:4,NOTICE:3,DEBUG:2,VERBOSE:1},Event:{LOG:"log"},logLevel:5,plainLogs:false,report:function(e,t,i){if(console&&console.log){t=t||s.Level.NOTICE;i=i||"darkcyan";var r={5:"e",4:"w",3:"n",2:"d",1:"v"};var n=r[t];var a="[Youbora]"+s._getCurrentTime()+" "+n+":";this.emit("log",{level:t,msg:e,prefix:a});if(s.logLevel<=t){if(s.plainLogs||document.documentMode){s._plainReport(e,a)}else{var o;if(t===s.Level.ERROR&&console.error){o=console.error}else if(t===s.Level.WARNING&&console.warn){o=console.warn}else if(t===s.Level.DEBUG&&console.debug){o=console.debug}else{o=console.log}a="%c"+a;if(e instanceof Array){e.splice(0,0,a,"color: "+i);o.apply(console,e)}else{o.call(console,a,"color: "+i,e)}}}}},_getCurrentTime:function(){var e=new Date;var t=("0"+e.getDate()).slice(-2);var i=("0"+e.getMinutes()).slice(-2);var r=("0"+e.getSeconds()).slice(-2);var s=("00"+e.getMilliseconds()).slice(-3);return"["+t+":"+i+":"+r+"."+s+"]"},_plainReport:function(e,t){if(e instanceof Array){for(var i in e){s._plainReport(e[i],t)}}else{if(typeof e==="string"){console.log(t+" "+e)}else{console.log(t+" <next line>");console.log(e)}}},error:function(){s.report([].slice.call(arguments),s.Level.ERROR,"darkred")},warn:function(){s.report([].slice.call(arguments),s.Level.WARNING,"darkorange")},notice:function(){s.report([].slice.call(arguments),s.Level.NOTICE,"darkgreen")},debug:function(){s.report([].slice.call(arguments),s.Level.DEBUG,"indigo")},verbose:function(){s.report([].slice.call(arguments),s.Level.VERBOSE,"navy")},loadLevelFromUrl:function(){if(typeof window!=="undefined"&&window.location&&window.location.search){var e=/\?.*&*youbora-debug=(.+)/i.exec(window.location.search);if(e!==null){s.logLevel=e[1]}var t=/\?.*&*youbora-debug=plain/i.exec(window.location.search);if(t!==null){s.plainLogs=true}}}};t.exports=s},{"./emitter":18}],20:[function(e,t,i){var r=function(){};r.prototype={constructor:function(){}};r.extend=function(e,t){var i=this;var r;if(e&&Object.prototype.hasOwnProperty.call(e,"constructor")){r=e.constructor}else{r=function(){return i.apply(this,arguments)}}Object.assign(r,i,t);r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:false,writable:true,configurable:true}});if(e)Object.assign(r.prototype,e);r.__super__=i.prototype;return r};t.exports=r},{}],21:[function(e,t,i){var r=e("../object");var s=e("../log");var n=r.extend({constructor:function(e){this["enabled"]=true;this["httpSecure"]=null;this["host"]="nqs.nice264.com";this["accountCode"]="nicetest";this["username"]=null;this["parse.Hls"]=false;this["parse.CdnNameHeader"]="x-cdn-forward";this["parse.CdnNode"]=false;this["parse.CdnNode.list"]=["Akamai","Cloudfront","Level3","Fastly","Highwinds"];this["network.ip"]=null;this["network.isp"]=null;this["network.connectionType"]=null;this["device.code"]=null;this["content.transactionCode"]=null;this["content.resource"]=null;this["content.isLive"]=null;this["content.title"]=null;this["content.title2"]=null;this["content.duration"]=null;this["content.fps"]=null;this["content.bitrate"]=null;this["content.throughput"]=null;this["content.rendition"]=null;this["content.cdn"]=null;this["content.metadata"]={};this["ad.metadata"]={};this["extraparam.1"]=null;this["extraparam.2"]=null;this["extraparam.3"]=null;this["extraparam.4"]=null;this["extraparam.5"]=null;this["extraparam.6"]=null;this["extraparam.7"]=null;this["extraparam.8"]=null;this["extraparam.9"]=null;this["extraparam.10"]=null;this.setOptions(e)},setOptions:function(e,t){try{t=t||this;if(typeof e!=="undefined"){for(var i in e){if(typeof t[i]==="object"&&t[i]!==null){this.setOptions(e[i],t[i])}else{t[i]=e[i]}}}}catch(e){s.error(e)}}});t.exports=n},{"../log":19,"../object":20}],22:[function(e,t,i){var r=e("../emitter");var s=e("../timer");var n=e("../log");var a=e("../util");var o=e("../chrono");var d=e("../version");var u=e("../constants");var h=e("../comm/request");var l=e("../comm/communication");var c=e("../comm/transform/flow");var p=e("../comm/transform/view");var f=e("../comm/transform/nqs6");var g=e("../comm/transform/resource");var m=e("./options");var _=e("./requestbuilder");var v=e("../adapter/adapter");var y=r.extend({constructor:function(e,t){this.isInitiated=false;this.isPreloading=false;this.preloadChrono=new o;this.initChrono=new o;this.options=new m(e);this._adapter=null;this._adsAdapter=null;this._ping=this._ping=new s(this._sendPing.bind(this),5e3);this.requestBuilder=new _(this);this.resourceTransform=new g(this);this.viewTransform=new p(this);this.viewTransform.on(p.Event.DONE,function(e){this._ping.interval=e.target.response.pingTime*1e3}.bind(this));if(t)this.setAdapter(t);this.viewTransform.init()},_reset:function(){this._stopPings();this.resourceTransform=new g(this);this.isInitiated=false;this.isPreloading=false;this.initChrono.reset();this.preloadChrono.reset()},setOptions:function(e){this.options.setOptions(e)},setAdapter:function(e){if(e.plugin){n.warn("Adapters can only be added to a single plugin")}else{this.removeAdapter();this._adapter=e;e.plugin=this;e.on(v.Event.START,this._startListener.bind(this));e.on(v.Event.JOIN,this._joinListener.bind(this));e.on(v.Event.PAUSE,this._pauseListener.bind(this));e.on(v.Event.RESUME,this._resumeListener.bind(this));e.on(v.Event.SEEK_BEGIN,this._seekBeginListener.bind(this));e.on(v.Event.SEEK_END,this._seekEndListener.bind(this));e.on(v.Event.BUFFER_BEGIN,this._bufferBeginListener.bind(this));e.on(v.Event.BUFFER_END,this._bufferEndListener.bind(this));e.on(v.Event.ERROR,this._errorListener.bind(this));e.on(v.Event.STOP,this._stopListener.bind(this))}},getAdapter:function(){return this._adapter},removeAdapter:function(){if(this._adapter){this._adapter.dispose();this._adapter.plugin=null;this._adapter.off(v.Event.START,this._startListener);this._adapter.off(v.Event.JOIN,this._joinListener);this._adapter.off(v.Event.PAUSE,this._pauseListener);this._adapter.off(v.Event.RESUME,this._resumeListener);this._adapter.off(v.Event.SEEK_BEGIN,this._seekBeginListener);this._adapter.off(v.Event.SEEK_END,this._seekEndListener);this._adapter.off(v.Event.BUFFER_BEGIN,this._bufferBeginListener);this._adapter.off(v.Event.BUFFER_END,this._bufferEndListener);this._adapter.off(v.Event.ERROR,this._errorListener);this._adapter.off(v.Event.STOP,this._stopListener);this._adapter=null}},setAdsAdapter:function(e){if(e.plugin){n.warn("Adapters can only be added to a single plugin")}else{this.removeAdsAdapter();e.plugin=this;this._adsAdapter=e;e.on(v.Event.START,this._adStartListener.bind(this));e.on(v.Event.JOIN,this._adJoinListener.bind(this));e.on(v.Event.PAUSE,this._adPauseListener.bind(this));e.on(v.Event.RESUME,this._adResumeListener.bind(this));e.on(v.Event.BUFFER_BEGIN,this._adBufferBeginListener.bind(this));e.on(v.Event.BUFFER_END,this._adBufferEndListener.bind(this));e.on(v.Event.STOP,this._adStopListener.bind(this))}},getAdsAdapter:function(){return this._adsAdapter},removeAdsAdapter:function(){if(this._adsAdapter){this._adsAdapter.dispose();this._adsAdapter.plugin=null;this._adsAdapter.off(v.Event.START,this._adStartListener);this._adsAdapter.off(v.Event.JOIN,this._adJoinListener);this._adsAdapter.off(v.Event.PAUSE,this._adPauseListener);this._adsAdapter.off(v.Event.RESUME,this._adResumeListener);this._adsAdapter.off(v.Event.BUFFER_BEGIN,this._adBufferBeginListener);this._adsAdapter.off(v.Event.BUFFER_END,this._adBufferEndListener);this._adsAdapter.off(v.Event.STOP,this._adStopListener);this._adsAdapter=null}},disable:function(){this.setOptions({enabled:false})},enable:function(){this.setOptions({enabled:true})},_send:function(e,t,i){i=this.requestBuilder.buildParams(i,t);var r={params:i,plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};this.emit(e,r);if(this._comm&&i!==null&&this.options.enabled){this.lastServeiceSent=t;this._comm.sendRequest(new h(null,t,i));
}},_initComm:function(){this.resourceTransform.init(this.getResource());this._comm=new l;this._comm.addTransform(new c);this._comm.addTransform(this.viewTransform);this._comm.addTransform(this.resourceTransform);this._comm.addTransform(new f)},firePreloadBegin:function(){if(!this.isPreloading){this.isPreloading=true;this.preloadChrono.start()}},firePreloadEnd:function(){if(this.isPreloading){this.isPreloading=false;this.preloadChrono.stop()}},fireInit:function(e){if(!this.isInitiated){this.viewTransform.nextView();this._initComm();this._startPings();this.isInitiated=true;this.initChrono.start();e=e||{};this._send(y.Event.WILL_SEND_INIT,u.Service.INIT,e);n.notice(u.Service.INIT+" "+(e.title||e.mediaResource))}},_startListener:function(e){if(!this.isInitiated||this.lastServeiceSent===u.Service.ERROR){this.viewTransform.nextView();this._initComm();this._startPings()}var t=e.data.params||{};this._send(y.Event.WILL_SEND_START,u.Service.START,t);n.notice(u.Service.START+" "+(t.title||t.mediaResource))},_joinListener:function(e){var t=e.data.params||{};if(!this._adsAdapter||!this._adsAdapter.flags.isStarted){this._send(y.Event.WILL_SEND_JOIN,u.Service.JOIN,t);n.notice(u.Service.JOIN+" "+t.joinDuration+"ms")}else{if(this._adapter.monitor)this._adapter.monitor.stop();this._adapter.flags.isJoined=false;this._adapter.chronos.join.stopTime=0}},_pauseListener:function(e){if(this._adapter){if(this._adapter.flags.isBuffering||this._adapter.flags.isSeeking||this._adsAdapter&&this._adsAdapter.flags.isStarted){this._adapter.chronos.pause.reset()}}var t=e.data.params||{};this._send(y.Event.WILL_SEND_PAUSE,u.Service.PAUSE,t);n.notice(u.Service.PAUSE+" at "+t.playhead+"s")},_resumeListener:function(e){var t=e.data.params||{};this._send(y.Event.WILL_SEND_RESUME,u.Service.RESUME,t);n.notice(u.Service.RESUME+" "+t.pauseDuration+"ms")},_seekBeginListener:function(e){if(this._adapter&&this._adapter.flags.isPaused)this._adapter.chronos.pause.reset();n.notice("Seek Begin")},_seekEndListener:function(e){var t=e.data.params||{};this._send(y.Event.WILL_SEND_SEEK,u.Service.SEEK,t);n.notice(u.Service.SEEK+" to "+t.playhead+" in "+t.seekDuration+"ms")},_bufferBeginListener:function(e){if(this._adapter&&this._adapter.flags.isPaused)this._adapter.chronos.pause.reset();n.notice("Buffer Begin")},_bufferEndListener:function(e){var t=e.data.params||{};this._send(y.Event.WILL_SEND_BUFFER,u.Service.BUFFER,t);n.notice(u.Service.BUFFER+" to "+t.playhead+" in "+t.bufferDuration+"ms")},_errorListener:function(e){if(!this._comm)this._initComm();var t=e.data.params||{};this._send(y.Event.WILL_SEND_ERROR,u.Service.ERROR,t);n.notice(u.Service.ERROR+" "+t.errorLevel+" "+t.errorCode);if(t.errorLevel==="fatal")this._reset()},_stopListener:function(e){var t=e.data.params||{};this._send(y.Event.WILL_SEND_STOP,u.Service.STOP,t);n.notice(u.Service.STOP+" at "+t.playhead+"s");this._reset()},_adStartListener:function(e){if(this._adapter){this._adapter.fireBufferEnd();this._adapter.fireSeekEnd();if(this._adapter.flags.isPaused)this._adapter.chronos.pause.reset()}var t=e.data.params||{};t.adNumber=this.requestBuilder.getNewAdNumber();this._send(y.Event.WILL_SEND_AD_START,u.Service.AD_START,t);n.notice(u.Service.AD_START+" "+t.adPosition+t.adNumber+" at "+t.playhead+"s")},_adJoinListener:function(e){var t=e.data.params||{};t.adNumber=this.requestBuilder.lastSent.adNumber;this._send(y.Event.WILL_SEND_AD_JOIN,u.Service.AD_JOIN,t);n.notice(u.Service.AD_JOIN+" "+t.adJoinDuration+"ms")},_adPauseListener:function(e){var t=e.data.params||{};t.adNumber=this.requestBuilder.lastSent.adNumber;this._send(y.Event.WILL_SEND_AD_PAUSE,u.Service.AD_PAUSE,t);n.notice(u.Service.AD_PAUSE+" at "+t.adPlayhead+"s")},_adResumeListener:function(e){var t=e.data.params||{};t.adNumber=this.requestBuilder.lastSent.adNumber;this._send(y.Event.WILL_SEND_AD_RESUME,u.Service.AD_RESUME,t);n.notice(u.Service.AD_RESUME+" "+t.adPauseDuration+"ms")},_adBufferBeginListener:function(e){n.notice("Ad Buffer Begin");if(this._adsAdapter&&this._adsAdapter.flags.isPaused){this._adsAdapter.chronos.pause.reset()}},_adBufferEndListener:function(e){var t=e.data.params||{};t.adNumber=this.requestBuilder.lastSent.adNumber;this._send(y.Event.WILL_SEND_AD_BUFFER,u.Service.AD_BUFFER,t);n.notice(u.Service.AD_BUFFER+" "+t.adBufferDuration+"ms")},_adStopListener:function(e){if(this._adapter&&!this._adapter.flags.isJoined){this._adapter.chronos.join.startTime=Math.min(this._adapter.chronos.join.startTime+this._adsAdapter.chronos.total.getDeltaTime(),(new Date).getTime())}var t=e.data.params||{};t.adNumber=this.requestBuilder.lastSent.adNumber;this._send(y.Event.WILL_SEND_AD_STOP,u.Service.AD_STOP,t);n.notice(u.Service.AD_STOP+" "+t.adTotalDuration+"ms")},_startPings:function(){if(!this._ping.isRunning)this._ping.start()},_stopPings:function(){this._ping.stop()},_sendPing:function(e){var t={diffTime:e,entities:this.requestBuilder.getChangedEntities()};if(this._adapter){if(this._adapter.flags.isPaused){t=this.requestBuilder.fetchParams(t,["pauseDuration"])}else{t=this.requestBuilder.fetchParams(t,["bitrate","throughput","fps"]);if(this._adsAdapter&&this._adsAdapter.flags.isStarted){t=this.requestBuilder.fetchParams(t,["adBitrate"])}}if(this._adapter.flags.isBuffering){t=this.requestBuilder.fetchParams(t,["bufferDuration"])}if(this._adapter.flags.isSeeking){t=this.requestBuilder.fetchParams(t,["seekDuration"])}if(this._adsAdapter){if(this._adsAdapter.flags.isStarted){t=this.requestBuilder.fetchParams(t,["adPlayhead"])}if(this._adsAdapter.flags.isBuffering){t=this.requestBuilder.fetchParams(t,["adBufferDuration"])}}}this._send(y.Event.WILL_SEND_PING,u.Service.PING,t);n.verbose(u.Service.PING)},getHost:function(){return a.addProtocol(a.stripProtocol(this.options["host"]),this.options["httpSecure"])},isParseHls:function(){return this.options["parse.Hls"]},isParseCdnNode:function(){return this.options["parse.CdnNode"]},getParseCdnNodeList:function(){return this.options["parse.CdnNode.list"]},getParseCdnNodeNameHeader:function(){return this.options["parse.CdnNameHeader"]},getPlayhead:function(){var e=0;if(this._adapter){try{e=this._adapter.getPlayhead()}catch(e){n.warn("An error occurred while calling getPlayhead",e)}}return a.parseNumber(e,0)},getPlayrate:function(){var e=0;if(this._adapter){try{e=this._adapter.getPlayrate()}catch(e){n.warn("An error occured while calling getPlayrate",e)}}return e},getFramesPerSecond:function(){var e=null;if(this._adapter){try{e=this._adapter.getFramesPerSecond()}catch(e){n.warn("An error occured while calling getFramesPerSecond",e)}}return e},getDroppedFrames:function(){var e=null;if(this._adapter){try{e=this._adapter.getDroppedFrames()}catch(e){n.warn("An error occured while calling getDroppedFrames",e)}}if(!e){e=this.getWebkitDroppedFrames()}return a.parseNumber(e,0)},getWebkitDroppedFrames:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitDroppedFrameCount){return this._adapter.tag.webkitDroppedFrameCount}return null},getDuration:function(){var e=this.options["content.duration"];if(e===null&&this._adapter){try{e=this._adapter.getDuration()}catch(e){n.warn("An error occured while calling getDuration",e)}}return a.parseNumber(Math.round(e),0)},getBitrate:function(){var e=this.options["content.bitrate"];if(e===null&&this._adapter){try{e=this._adapter.getBitrate()}catch(e){n.warn("An error occured while calling getBitrate",e)}if(!e||e===-1){e=this.getWebkitBitrate()}}return a.parseNumber(e,-1)},getWebkitBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var e=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitBitrate){var t=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitBitrate;e=Math.round(t/this.viewTransform.response.pingTime*8)}this._lastWebkitBitrate=this._adapter.tag.webkitVideoDecodedByteCount;return e!==0?e:-1}},getThroughput:function(){var e=this.options["content.throughput"];if(e===null&&this._adapter){try{e=this._adapter.getThroughput()}catch(e){n.warn("An error occured while calling getThroughput",e)}}return a.parseNumber(e,-1)},getRendition:function(){var e=this.options["content.rendition"];if(e===null&&this._adapter){try{e=this._adapter.getRendition()}catch(e){n.warn("An error occured while calling getRendition",e)}}return e},getTitle:function(){var e=this.options["content.title"];if(e===null&&this._adapter){try{e=this._adapter.getTitle()}catch(e){n.warn("An error occured while calling getTitle",e)}}return e},getTitle2:function(){var e=this.options["content.title2"];if(e===null&&this._adapter){try{e=this._adapter.getTitle2()}catch(e){n.warn("An error occured while calling getTitle2",e)}}return e},getIsLive:function(){var e=this.options["content.isLive"];if(e===null&&this._adapter){try{e=this._adapter.getIsLive()}catch(e){n.warn("An error occured while calling getIsLive",e)}}return e||false},getResource:function(){var e=null;if(!this.resourceTransform.isBlocking()){e=this.resourceTransform.getResource()}return e||this.getOriginalResource()},getOriginalResource:function(){var e=null;e=this.options["content.resource"];if(e===null&&this._adapter){try{e=this._adapter.getResource()}catch(t){n.warn("An error occured while calling getResource",t);e=null}}return e||"unknown"},getTransactionCode:function(){return this.options["content.transactionCode"]},getMetadata:function(){return this.options["content.metadata"]},getPlayerVersion:function(){var e="";if(this._adapter){try{e=this._adapter.getPlayerVersion()}catch(e){n.warn("An error occured while calling getPlayerVersion",e)}}return e},getPlayerName:function(){var e="";if(this._adapter){try{e=this._adapter.getPlayerName()}catch(e){n.warn("An error occured while calling getPlayerName",e)}}return e},getCdn:function(){var e=null;if(!this.resourceTransform.isBlocking()){e=this.resourceTransform.getCdnName()}return e||this.options["content.cdn"]},getPluginVersion:function(){var e=this.getAdapterVersion();if(!e)e=d+"-adapterless";return e},getAdapterVersion:function(){var e=null;if(this._adapter){try{e=this._adapter.getVersion()}catch(e){n.warn("An error occured while calling getPluginVersion",e)}}return e},getExtraparam1:function(){return this.options["extraparam.1"]},getExtraparam2:function(){return this.options["extraparam.2"]},getExtraparam3:function(){return this.options["extraparam.3"]},getExtraparam4:function(){return this.options["extraparam.4"]},getExtraparam5:function(){return this.options["extraparam.5"]},getExtraparam6:function(){return this.options["extraparam.6"]},getExtraparam7:function(){return this.options["extraparam.7"]},getExtraparam8:function(){return this.options["extraparam.8"]},getExtraparam9:function(){return this.options["extraparam.9"]},getExtraparam10:function(){return this.options["extraparam.10"]},getAdPlayerVersion:function(){var e="";if(this._adsAdapter){try{e=this._adsAdapter.getPlayerVersion()}catch(e){n.warn("An error occured while calling getAdPlayerVersion",e)}}return e},getAdPosition:function(){var e="pre";if(this._adsAdapter){try{e=this._adsAdapter.getPosition()}catch(e){n.warn("An error occured while calling getAdPosition",e)}}if(!e&&this._adapter){e=this._adapter.flags.isJoined?"mid":"pre"}return e},getAdPlayhead:function(){var e=null;if(this._adsAdapter){try{e=this._adsAdapter.getPlayhead()}catch(e){n.warn("An error occured while calling getAdPlayhead",e)}}return a.parseNumber(e,0)},getAdDuration:function(){var e=null;if(this._adsAdapter){try{e=this._adsAdapter.getDuration()}catch(e){n.warn("An error occured while calling getAdDuration",e)}}return a.parseNumber(e,0)},getAdBitrate:function(){var e=null;if(this._adsAdapter){try{e=this._adsAdapter.getBitrate()}catch(e){n.warn("An error occured while calling getAdBitrate",e)}if(!e||e===-1){e=this.getWebkitAdBitrate()}}return a.parseNumber(e,-1)},getWebkitAdBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var e=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitAdBitrate){var t=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitAdBitrate;e=Math.round(t/this.viewTransform.response.pingTime*8)}this._lastWebkitAdBitrate=this._adapter.tag.webkitVideoDecodedByteCount;return e!==0?e:-1}},getAdTitle:function(){var e=null;if(this._adsAdapter){try{e=this._adsAdapter.getTitle()}catch(e){n.warn("An error occured while calling getAdTitle",e)}}return e},getAdResource:function(){var e=null;if(this._adsAdapter){try{e=this._adsAdapter.getResource()}catch(e){n.warn("An error occured while calling getAdResource",e)}}return e},getAdAdapterVersion:function(){var e=null;if(this._adsAdapter){try{e=this._adsAdapter.getVersion()}catch(e){n.warn("An error occured while calling getAdsAdapterVersion",e)}}return e},getAdMetadata:function(){return this.options["ad.metadata"]},getPluginInfo:function(){var e={lib:d,adapter:this.getAdapterVersion(),adAdapter:this.getAdAdapterVersion()};return e},getIp:function(){return this.options["network.ip"]},getIsp:function(){return this.options["network.isp"]},getConnectionType:function(){return this.options["network.connectionType"]},getDeviceCode:function(){return this.options["device.code"]},getAccountCode:function(){return this.options["accountCode"]},getUsername:function(){return this.options["username"]},getReferer:function(){var e="";if(typeof window!=="undefined"&&window.location){e=window.location.href}return e},getNodeHost:function(){return this.resourceTransform.getNodeHost()},getNodeType:function(){return this.resourceTransform.getNodeType()},getNodeTypeString:function(){return this.resourceTransform.getNodeTypeString()},getPreloadDuration:function(){return this.preloadChrono.getDeltaTime(false)},getInitDuration:function(){return this.initChrono.getDeltaTime(false)},getJoinDuration:function(){if(this.isInitiated)return this.getInitDuration();return this._adapter?this._adapter.chronos.join.getDeltaTime(false):-1},getBufferDuration:function(){return this._adapter?this._adapter.chronos.buffer.getDeltaTime(false):-1},getSeekDuration:function(){return this._adapter?this._adapter.chronos.seek.getDeltaTime(false):-1},getPauseDuration:function(){return this._adapter?this._adapter.chronos.pause.getDeltaTime(false):-1},getAdJoinDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.join.getDeltaTime(false):-1},getAdBufferDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.buffer.getDeltaTime(false):-1},getAdPauseDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.pause.getDeltaTime(false):-1},getAdTotalDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.total.getDeltaTime(false):-1}},{Event:{WILL_SEND_START:"will-send-start",WILL_SEND_JOIN:"will-send-join",WILL_SEND_PAUSE:"will-send-pause",WILL_SEND_RESUME:"will-send-resume",WILL_SEND_SEEK:"will-send-seek",WILL_SEND_BUFFER:"will-send-buffer",WILL_SEND_ERROR:"will-send-error",WILL_SEND_FATAL_ERROR:"will-send-fatal-error",WILL_SEND_STOP:"will-send-stop",WILL_SEND_PING:"will-send-ping",WILL_SEND_AD_START:"will-send-ad-start",WILL_SEND_AD_JOIN:"will-send-ad-join",WILL_SEND_AD_PAUSE:"will-send-ad-pause",WILL_SEND_AD_RESUME:"will-send-ad-resume",WILL_SEND_AD_BUFFER:"will-send-ad-buffer",WILL_SEND_AD_STOP:"will-send-ad-stop"}});t.exports=y},{"../adapter/adapter":3,"../chrono":7,"../comm/communication":8,"../comm/request":9,"../comm/transform/flow":10,"../comm/transform/nqs6":11,"../comm/transform/resource":12,"../comm/transform/view":16,"../constants":17,"../emitter":18,"../log":19,"../timer":25,"../util":26,"../version":27,"./options":21,"./requestbuilder":23}],23:[function(e,t,i){var r=e("../object");var s=e("../log");var n=["accountCode","username","rendition","title","title2","live","mediaDuration","mediaResource","transactionCode","properties","cdn","playerVersion","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","pluginVersion","pluginInfo","isp","connectionType","ip","deviceCode","preloadDuration"];var a=r.extend({constructor:function(e){this._plugin=e;this._adNumber=0;this.lastSent={}},fetchParams:function(e,t,i){e=e||{};t=t||[];for(var r=0;r<t.length;r++){var n=t[r];if(e[n]){continue}var o=a.getters[n];if(this._plugin[o]){var d=this._plugin[o]();if(d!==null&&(!i||this.lastSent[n]!==d)){e[n]=d;this.lastSent[n]=d}}else{s.warn("Trying to call undefined getter "+n+":"+o)}}return e},buildParams:function(e,t){e=e||{};this.fetchParams(e,a.params[t],false);this.fetchParams(e,a.differentParams[t],true);return e},getNewAdNumber:function(){var e=this.lastSent.adNumber;if(e&&this.lastSent.adPosition===this._plugin.getAdPosition()){e+=1}else{e=1}this.lastSent.adNumber=e;return e},getChangedEntities:function(){return this.fetchParams({},a.differentParams["entities"],true)}},{params:{"/data":["system","pluginVersion"],"/init":n,"/start":n,"/joinTime":["joinDuration","playhead"],"/pause":["playhead"],"/resume":["pauseDuration","playhead"],"/seek":["seekDuration","playhead"],"/bufferUnderrun":["bufferDuration","playhead"],"/error":["player"].concat(n),"/stop":["bitrate","playhead"],"/adStart":["playhead","adTitle","adPosition","adDuration","adResource","adPlayerVersion","adProperties","adAdapterVersion"],"/adJoin":["adPosition","adJoinDuration","adPlayhead"],"/adPause":["adPosition","adPlayhead"],"/adResume":["adPosition","adPlayhead","adPauseDuration"],"/adBufferUnerrun":["adPosition","adPlayhead","adBufferDuration"],"/adStop":["adPosition","adPlayhead","adBitrate","adTotalDuration"],"/ping":["playhead","droppedFrames","playrate"]},differentParams:{"/join":["title","title2","live","mediaDuration","mediaResource"],"/adJoin":["adTitle","adDuration","adResource"],entities:["rendition","title","title2","live","mediaDuration","mediaResource","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","connectionType","deviceCode","ip","username","cdn","nodeHost","nodeType","nodeTypeString"]},getters:{playhead:"getPlayhead",playrate:"getPlayrate",fps:"getFramesPerSecond",droppedFrames:"getDroppedFrames",mediaDuration:"getDuration",bitrate:"getBitrate",throughput:"getThroughput",rendition:"getRendition",title:"getTitle",title2:"getTitle2",live:"getIsLive",mediaResource:"getResource",transactionCode:"getTransactionCode",properties:"getMetadata",playerVersion:"getPlayerVersion",player:"getPlayerName",cdn:"getCdn",pluginVersion:"getPluginVersion",param1:"getExtraparam1",param2:"getExtraparam2",param3:"getExtraparam3",param4:"getExtraparam4",param5:"getExtraparam5",param6:"getExtraparam6",param7:"getExtraparam7",param8:"getExtraparam8",param9:"getExtraparam9",param10:"getExtraparam10",adPosition:"getAdPosition",adPlayhead:"getAdPlayhead",adDuration:"getAdDuration",adBitrate:"getAdBitrate",adTitle:"getAdTitle",adResource:"getAdResource",adPlayerVersion:"getAdPlayerVersion",adProperties:"getAdMetadata",adAdapterVersion:"getAdAdapterVersion",pluginInfo:"getPluginInfo",isp:"getIsp",connectionType:"getConnectionType",ip:"getIp",deviceCode:"getDeviceCode",system:"getAccountCode",accountCode:"getAccountCode",username:"getUsername",preloadDuration:"getPreloadDuration",joinDuration:"getJoinDuration",bufferDuration:"getBufferDuration",seekDuration:"getSeekDuration",pauseDuration:"getPauseDuration",adJoinDuration:"getAdJoinDuration",adBufferDuration:"getAdBufferDuration",adPauseDuration:"getAdPauseDuration",adTotalDuration:"getAdTotalDuration",referer:"getReferer",nodeHost:"getNodeHost",nodeType:"getNodeType",nodeTypeString:"getNodeTypeString"}});t.exports=a},{"../log":19,"../object":20}],24:[function(e,t,i){var r=function(){Function.prototype.bind=Function.prototype.bind||function(e){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var t=Array.prototype.slice;var i=t.call(arguments,1);var r=this;var s=function(){};var n=function(){return r.apply(this instanceof s?this:e||window,i.concat(t.call(arguments)))};s.prototype=this.prototype;n.prototype=new s;return n};Object.assign=Object.assign||function(e){if(e===undefined||e===null){throw new TypeError("Cannot convert undefined or null to object")}var t=Object(e);for(var i=1;i<arguments.length;i++){var r=arguments[i];if(r!==undefined&&r!==null){for(var s in r){if(r.hasOwnProperty(s)){t[s]=r[s]}}}}return t};Object.create=Object.create||function(){var e=function(){};return function(t,i){if(t!==Object(t)&&t!==null){throw TypeError("Argument must be an object, or null")}e.prototype=t||{};var r=new e;e.prototype=null;if(i!==undefined){Object.defineProperties(r,i)}if(t===null){r.prototype=null}return r}}();Array.prototype.forEach=Array.prototype.forEach||function(e,t){if(typeof e!=="function"){throw new TypeError(e+" is not a function!")}var i=this.length;for(var r=0;r<i;r++){e.call(t,this[r],r,this)}};Array.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}};t.exports=r},{}],25:[function(e,t,i){var r=e("./object");var s=e("./chrono");var n=r.extend({constructor:function(e,t){this.callback=e;this.interval=t||5e3;this.isRunning=false;this._timer=null;this.chrono=new s},start:function(){this.isRunning=true;this._setTick()},stop:function(){this.isRunning=false;if(this._timer)clearTimeout(this._timer)},_setTick:function(){this.chrono.start();this._timer=setTimeout(function(){this.callback(this.chrono.stop());this._setTick()}.bind(this),this.interval)}});t.exports=n},{"./chrono":7,"./object":20}],26:[function(e,t,i){var r=e("./log");var s={stripProtocol:function(e){try{return e.replace(/^(.*?:\/\/|\/\/)/i,"")}catch(t){r.warn(t);return e}},addProtocol:function(e,t){try{if(t===true){return"https://"+e}else if(window.location.protocol.indexOf("http")===0){return"//"+e}else{return"http://"+e}}catch(e){r.warn(e);return"http://localhost/"}},parseNumber:function(e,t){if(!isNaN(e)&&e>=0&&e!==Infinity&&e!==-Infinity&&e!==null&&typeof e!=="undefined"){return e}else{return t}},logAllEvents:function(e,t,i){try{if(r.logLevel<=r.Level.DEBUG){i=i||function(e){r.debug("Event: "+e.type)};var s=["canplay","buffering","waiting","ended","play","playing","pause","resume","error","abort","seek","seeking","seeked","stalled","dispose","loadeddata","loadstart"];if(t){if(t[0]===null){t.shift();s=t}else{s=s.concat(t)}}for(var n=0;n<s.length;n++){if(typeof e==="function"){e.call(window,s[n],i)}else if(e.on){e.on(s[n],i)}else if(e.addEventListener){e.addEventListener(s[n],i)}}}}catch(e){r.error(e)}},buildRenditionString:function(e,t,i){if(arguments.length===1){i=e;e=null;t=null}var r="";if(e&&t){r=e+"x"+t;if(i>0){r+="@"}}if(i<1){return r}else if(i<1e3){r+=Math.round(i)+"bps"}else if(i<1e6){i=Math.round(i/1e3);r+=i+"Kbps"}else{i=Math.round(i/1e4)/100;r+=i+"Mbps"}return r||null}};t.exports=s},{"./log":19}],27:[function(e,t,i){t.exports=e("../manifest.json").version},{"../manifest.json":2}],28:[function(e,t,i){var r=s;var s={};s.noConflict=function(){s=r;return this};s.VERSION=e("./version");s.polyfills=e("./polyfills");s.Object=e("./object");s.Emitter=e("./emitter");s.Util=e("./util");s.Chrono=e("./chrono");s.Timer=e("./timer");s.Constants=e("./constants");s.Log=e("./log");s.Log.loadLevelFromUrl();s.Request=e("./comm/request");s.Communication=e("./comm/communication");s.Transform=e("./comm/transform/transform");s.ViewTransform=e("./comm/transform/view");s.Nqs6Transform=e("./comm/transform/nqs6");s.ResourceTransform=e("./comm/transform/resource");s.CdnParser=e("./comm/transform/resourceparsers/cdnparser");s.HlsParser=e("./comm/transform/resourceparsers/hlsparser");s.Options=e("./plugin/options");s.Plugin=e("./plugin/plugin");s.RequestBuilder=e("./plugin/requestbuilder");s.PlayheadMonitor=e("./adapter/playheadmonitor");s.Adapter=e("./adapter/adapter");s.adapters={};t.exports=s},{"./adapter/adapter":3,"./adapter/playheadmonitor":6,"./chrono":7,"./comm/communication":8,"./comm/request":9,"./comm/transform/nqs6":11,"./comm/transform/resource":12,"./comm/transform/resourceparsers/cdnparser":13,"./comm/transform/resourceparsers/hlsparser":14,"./comm/transform/transform":15,"./comm/transform/view":16,"./constants":17,"./emitter":18,"./log":19,"./object":20,"./plugin/options":21,"./plugin/plugin":22,"./plugin/requestbuilder":23,"./polyfills":24,"./timer":25,"./util":26,"./version":27}],29:[function(e,t,i){var r=e("youboralib");var s=e("../manifest.json");r.adapters.Videojs5=r.Adapter.extend({getVersion:function(){return s.version+"-videojs5"},getPlayhead:function(){if(this.player.ads&&this.player.ads.snapshot&&this.player.ads.snapshot.currentTime){return this.player.ads.snapshot.currentTime}else if(this.player.absoluteTime){return this.player.absoluteTime()}else{return this.player.currentTime()}},getDuration:function(){if(this.player.mediainfo&&typeof this.player.mediainfo.duration!=="undefined"){return this.player.mediainfo.duration}else{return this.player.duration()}},getResource:function(){if(this.getTech().hls_){return this.getTech().hls_.url}else{return this.player.currentSrc()}},getTitle:function(){if(this.player.mediainfo&&this.player.mediainfo.name){return this.player.mediainfo.name}},getThroughput:function(){if(this.getTech().hls&&this.getTech().hls.bandwidth){return this.getTech().hls.bandwidth}},getBitrate:function(){if(this.getTech().hls){var e=this.getTech().hls.playlists.media();if(e&&e.attributes)return e.attributes.BANDWIDTH}else if(this.getTech().hls_){var t=this.getTech().hls_.levels[this.getTech().hls_.currentLevel];if(t&&t.bitrate)return t.bitrate}},getRendition:function(){if(this.getTech().hls){var e=this.getTech().hls.playlists.media();if(e&&e.attributes){var t=e.attributes;if(t.NAME){return t.NAME}else if(t.RESOLUTION){return r.Util.buildRenditionString(t.RESOLUTION.width,t.RESOLUTION.height,t.BANDWIDTH)}else{return r.Util.buildRenditionString(t.BANDWIDTH)}}}else if(this.getTech().hls_){var i=this.getTech().hls_.levels[this.getTech().hls_.currentLevel];if(i&&i.name){return i.name}else{return r.Util.buildRenditionString(i.width,i.height,i.bitrate)}}},getPlayerName:function(){var e="videojs5";if(this.getTech().hls)e+="-hls";if(this.getTech().hls_)e+="-hlsjs";if(this.player.mediainfo)e+="-bcove";if(this.player.ima||this.player.ima3)e+="-ima";if(this.player.FreeWheelPlugin)e+="-fw";if(this.player.onceux)this.pluginName+="-oux";return e},getPlayerVersion:function(){var e=this.getPlayerName();if(videojs.VERSION)e+=" "+videojs.VERSION;return e},getTech:function(){return this.player.tech({IWillNotUseThisInPlugins:true})},registerListeners:function(){r.Util.logAllEvents(this.player,["adstart","adend","adskip","adsready","adserror","dispose"]);this.monitorPlayhead(true,false);this.player.on("loadstart",this.loadstartListener.bind(this));this.player.on("adsready",this.adsreadyListener.bind(this));this.player.on("play",this.playListener.bind(this));this.player.on("timeupdate",this.timeupdateListener.bind(this));this.player.on("pause",this.pauseListener.bind(this));this.player.on("playing",this.playingListener.bind(this));this.player.on("abort",this.abortListener.bind(this));this.player.on("ended",this.endedListener.bind(this));this.player.on("dispose",this.disposeListener.bind(this));this.player.on("seeking",this.seekingListener.bind(this));this.player.on("seeked",this.seekedListener.bind(this));this.player.on("error",this.errorListener.bind(this))},loadstartListener:function(e){r.Log.notice("Player detected "+this.getPlayerName());if(this.player.autoplay())this.fireStart()},adsreadyListener:function(e){this.loadAdsAdapter()},playListener:function(e){this.fireStart()},timeupdateListener:function(e){if(this.getPlayhead()>.1){this.fireJoin();if(this.lastSeekPlayhead&&this.lastSeekPlayhead!==this.getPlayhead()){this.fireSeekEnd();this.lastSeekPlayhead=false}}},pauseListener:function(e){this.firePause()},playingListener:function(e){this.fireResume()},abortListener:function(e){this.fireStop()},endedListener:function(e){this.fireStop()},disposeListener:function(e){this.fireStop()},seekingListener:function(e){this.fireSeekBegin()},seekedListener:function(e){this.lastSeekPlayhead=this.getPlayhead()},errorListener:function(e){if(this.player.error&&this.player.error()){this.fireError(this.player.error().code,this.player.error().message)}},unregisterListeners:function(){this.monitor.stop();this.player.off("loadstart",this.loadstartListener);this.player.off("adsready",this.adsreadyListener);this.player.off("play",this.playListener);this.player.off("playing",this.playingListener);this.player.off("pause",this.pauseListener);this.player.off("abort",this.abortListener);this.player.off("ended",this.endedListener);this.player.off("dispose",this.disposeListener);this.player.off("seeking",this.seekingListener);this.player.off("seeked",this.seekedListener);this.player.off("timeupdate",this.timeupdateListener);this.player.off("error",this.errorListener)},loadAdsAdapter:function(){if(this.plugin.getAdsAdapter()===null){var e;if(typeof google!=="undefined"){if(this.player.mediainfo&&this.player.ads&&this.player.ima3){e=new r.adapters.Videojs5.BrightcoveAdsAdapter(this.player)}else if(this.player.ima){e=new r.adapters.Videojs5.ImaAdsAdapter(this.player)}}else if(this.player.onceux){e=new r.adapters.Videojs5.OnceUXAdsAdapter(this.player)}else{e=new r.adapters.Videojs5.GenericAdsAdapter(this.player)}this.plugin.setAdsAdapter(e)}}},{GenericAdsAdapter:e("./ads/generic"),ImaAdsAdapter:e("./ads/ima"),BrightcoveAdsAdapter:e("./ads/brightcove"),OnceUXAdsAdapter:e("./ads/onceux")});t.exports=r.adapters.Videojs5},{"../manifest.json":1,"./ads/brightcove":30,"./ads/generic":31,"./ads/ima":32,"./ads/onceux":33,youboralib:28}],30:[function(e,t,i){var r=e("youboralib");var s=e("../../manifest.json");var n=r.Adapter.extend({getVersion:function(){return s.version+"-videojs-bcove-ads"},getPlayhead:function(){return this.player.ima3.adPlayer.currentTime()},registerListeners:function(){r.Util.logAllEvents(this.player,[null,"ima3-ready","ima3error","ima3-ad-error","ima3-started","ima3-complete","ima3-paused","ima3-resumed","ads-request","ads-load","ads-ad-started","ads-ad-ended","ads-pause","ads-play","ads-click","ads-pod-started","ads-pod-ended","ads-allpods-completed"]);this.monitorPlayhead(true,false);this.player.on("ima3-started",this.imaStartedListener.bind(this));this.player.on("ima3-paused",this.imaPausedListener.bind(this));this.player.on("ima3-resumed",this.imaResumedListener.bind(this));this.player.on("ima3-complete",this.imaCompleteListener.bind(this));this.player.on("ima3-skipped",this.imaSkippedListener.bind(this))},imaStartedListener:function(e){this.fireStart();this.fireJoin()},imaPausedListener:function(e){this.firePause()},imaResumedListener:function(e){this.fireResume()},imaCompleteListener:function(e){this.fireStop()},imaSkippedListener:function(e){this.fireStop({skipped:true})},unregisterListeners:function(){this.monitor.stop();this.player.off("ima3-started",this.imaStartedListener);this.player.off("ima3-paused",this.imaPausedListener);this.player.off("ima3-resumed",this.imaResumedListener);this.player.off("ima3-complete",this.imaCompleteListener);this.player.off("ima3-skipped",this.imaSkippedListener)}});t.exports=n},{"../../manifest.json":1,youboralib:28}],31:[function(e,t,i){var r=e("youboralib");var s=e("../../manifest.json");var n=r.Adapter.extend({getVersion:function(){return s.version+"-videojs-ads"},registerListeners:function(){this.player.on("adstart",this.adStartListener.bind(this));this.player.on("adend",this.adEndListener.bind(this));this.player.on("adskip",this.adSkipListener.bind(this))},adStartListener:function(e){this.fireStart();this.fireJoin()},adEndListener:function(e){this.fireStop()},adSkipListener:function(e){this.fireStop({skipped:true})},unregisterListeners:function(){this.player.off("adstart",this.adStartListener);this.player.off("adend",this.adEndListener);this.player.off("adskip",this.adSkipListener)}});t.exports=n},{"../../manifest.json":1,youboralib:28}],32:[function(e,t,i){var r=e("youboralib");var s=e("../../manifest.json");var n=r.Adapter.extend({getVersion:function(){
return s.version+"-videojs-ima-ads"},getDuration:function(){if(this.player.ima.getAdsManager().getCurrentAd()!==null){this.duration=this.player.ima.getAdsManager().getCurrentAd().getDuration()}return this.duration},getTitle:function(){return this.player.ima.getAdsManager().getCurrentAd().getTitle()},getPlayhead:function(){return this.getDuration()-this.player.ima.getAdsManager().getRemainingTime()},getPlayerVersion:function(){return"IMA"+google.ima.VERSION+"; contrib-ads "+this.player.ads.VERSION},registerListeners:function(){this.monitorPlayhead(true,false);r.Util.logAllEvents(this.player.ima.addEventListener,[null,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.LOG]);this.player.ima.addEventListener(google.ima.AdEvent.Type.LOADED,this.loadedListener.bind(this));this.player.ima.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.contentPauseRequestedListener.bind(this));this.player.ima.addEventListener(google.ima.AdEvent.Type.STARTED,this.startedListener.bind(this));this.player.ima.addEventListener(google.ima.AdEvent.Type.PAUSED,this.pausedListener.bind(this));this.player.ima.addEventListener(google.ima.AdEvent.Type.RESUMED,this.resumedListener.bind(this));this.player.ima.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.completeListener.bind(this));this.player.ima.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.skippedListener.bind(this))},loadedListener:function(e){this.fireStart()},contentPauseRequestedListener:function(e){this.fireStart()},startedListener:function(e){this.fireJoin()},pausedListener:function(e){this.firePause()},resumedListener:function(e){this.fireResume()},completeListener:function(e){this.fireStop()},skippedListener:function(e){this.fireStop({skipped:true})},unregisterListeners:function(){this.monitor.stop()}});t.exports=n},{"../../manifest.json":1,youboralib:28}],33:[function(e,t,i){var r=e("youboralib");var s=e("../../manifest.json");var n=r.Adapter.extend({getVersion:function(){return s.version+"-videojs-onceux-ads"},getResource:function(){return this.player.ads.contentSrc},getPlayhead:function(){return this.player.onceux.currentTime()},getDuration:function(){return this.player.onceux.duration()},registerListeners:function(){r.Util.logAllEvents(this.player,[null,"onceux-ads-complete","onceux-adroll-start","onceux-adroll-complete","onceux-linearad-start","onceux-linearad-impression","onceux-linearad-complete","onceux-linearad-skipped","onceux-linearad-pause","onceux-linearad-resume","onceux-companionad-creativeView"]);this.monitorPlayhead(true,false);this.player.on("onceux-linearad-start",this.startedListener.bind(this));this.player.on("onceux-linearad-pause",this.pausedListener.bind(this));this.player.on("onceux-linearad-resume",this.resumedListener.bind(this));this.player.on("onceux-linearad-complete",this.completeListener.bind(this));this.player.on("onceux-linearad-skipped",this.skippedListener.bind(this))},startedListener:function(e){this.fireStart();this.fireJoin()},pausedListener:function(e){this.firePause()},resumedListener:function(e){this.fireResume()},completeListener:function(e){this.fireStop()},skippedListener:function(e){this.fireStop({skipped:true})},unregisterListeners:function(){this.monitor.stop();this.player.off("onceux-linearad-start",this.startedListener);this.player.off("onceux-linearad-pause",this.pausedListener);this.player.off("onceux-linearad-resume",this.resumedListener);this.player.off("onceux-linearad-complete",this.completeListener);this.player.off("onceux-linearad-skipped",this.skippedListener)}});t.exports=n},{"../../manifest.json":1,youboralib:28}],34:[function(e,t,i){t.exports=function(e){if(typeof videojs!=="undefined"){videojs.plugin("youbora",function(t){if(typeof this.youboraplugin==="undefined"){this.youboraplugin=new e.Plugin(t,new e.adapters.VideoJS5(this))}else{this.youboraplugin.setOptions(t)}})}}},{}],35:[function(e,t,i){var r=e("youboralib");e("./adapter");e("./register-plugin")(r);t.exports=r},{"./adapter":29,"./register-plugin":34,youboralib:28}]},{},[35])(35)});
//# sourceMappingURL=sp.min.js.map
